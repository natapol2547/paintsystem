From e295802e6a80cb1fe7e06ca98fc399f840d27396 Mon Sep 17 00:00:00 2001
From: PinkNinjaa <169002704+PinkNinjaa@users.noreply.github.com>
Date: Mon, 9 Feb 2026 15:56:18 +1300
Subject: [PATCH] Removed AutoUV coord type

consolidated with UV type in layers settings. Popovers to choose auto uv stays the same
---
 custom_icons.py         | 18 +++++++++++++-----
 operators/common.py     |  7 ++++---
 panels/layers_panels.py | 27 +++++++++++++++++----------
 3 files changed, 34 insertions(+), 18 deletions(-)

diff --git a/custom_icons.py b/custom_icons.py
index f67b416..758ffb6 100644
--- a/custom_icons.py
+++ b/custom_icons.py
@@ -31,11 +31,19 @@ def unload_icons():
 
 
 def get_icon(custom_icon_name):
-    if custom_icons is None:
-        return None
-    if custom_icon_name not in custom_icons:
-        return None
-    return custom_icons[custom_icon_name].icon_id
+    def resolve_icon_id():
+        if custom_icons is None:
+            return 0
+        if custom_icon_name not in custom_icons:
+            return 0
+        icon_id = custom_icons[custom_icon_name].icon_id
+        return icon_id or 0
+
+    icon_id = resolve_icon_id()
+    if icon_id:
+        return icon_id
+    load_icons()
+    return resolve_icon_id()
 
     
 def get_icon_from_socket_type(socket_type: str) -> int:
diff --git a/operators/common.py b/operators/common.py
index c8a2414..d46d1b1 100644
--- a/operators/common.py
+++ b/operators/common.py
@@ -172,14 +172,15 @@ class PSUVOptionsMixin:
         ps_ctx = PSContextMixin.parse_context(context)
         row = layout.row(align=True)
         row.label(text="Coordinate System", icon_value=get_icon('transform'))
-        row.prop(self, "use_paint_system_uv", text="Use AUTO UV?", toggle =1)
+        row.prop(self, "use_paint_system_uv", text="Auto UV", toggle=1)
         if self.use_paint_system_uv:
             info_box = layout.box()
             if not ps_ctx.ps_object.data.uv_layers.get(DEFAULT_PS_UV_MAP_NAME):
                 info_box.alert = True
-                info_box.label(text="Will create a new UV Map: " + DEFAULT_PS_UV_MAP_NAME, icon='ERROR')
+                info_box.label(text="UV: " + DEFAULT_PS_UV_MAP_NAME, icon='ERROR')
+                info_box.label(text="A new UV map will be created", icon='INFO')
             else:
-                info_box.label(text="Using UV Map: " + DEFAULT_PS_UV_MAP_NAME, icon='INFO')
+                info_box.label(text="UV: " + DEFAULT_PS_UV_MAP_NAME, icon='INFO')
             return
         layout.prop(self, "coord_type", text="")
         if self.coord_type != 'UV':
diff --git a/panels/layers_panels.py b/panels/layers_panels.py
index ca52c77..f23645a 100644
--- a/panels/layers_panels.py
+++ b/panels/layers_panels.py
@@ -373,19 +373,25 @@ def draw_layer_settings(layout, context):
         header, transform_panel = layout.panel("layer_transform_settings_panel", default_closed=True)
         header.label(text="Transform", icon_value=get_icon('transform'))
         row = header.row(align=True)
-        row.prop(active_layer, "coord_type", text="")
+        if active_layer.coord_type == 'AUTO':
+            row.label(text="UV")
+            row.prop_search(active_layer, "uv_map_name", text="",
+                            search_data=ps_ctx.ps_object.data, search_property="uv_layers", icon='GROUP_UVS')
+        else:
+            row.prop(active_layer, "coord_type", text="")
         if ps_ctx.active_layer.type == "IMAGE" and ps_ctx.active_layer.image:
             row.operator("paint_system.transfer_image_layer_uv", text="", icon='UV_DATA')
         if transform_panel:
             transform_panel.use_property_split = True
             transform_panel.use_property_decorate = False
             box = transform_panel.box()
-            if active_layer.coord_type not in {'AUTO', 'OBJECT', 'CAMERA', 'WINDOW', 'REFLECTION', 'POSITION', 'GENERATED'}:
+            effective_coord_type = 'UV' if active_layer.coord_type == 'AUTO' else active_layer.coord_type
+            if effective_coord_type not in {'OBJECT', 'CAMERA', 'WINDOW', 'REFLECTION', 'POSITION', 'GENERATED'}:
                 col = box.column()
-                if active_layer.coord_type == 'UV':
+                if effective_coord_type == 'UV':
                     col.prop_search(active_layer, "uv_map_name", text="UV Map",
                                         search_data=ps_ctx.ps_object.data, search_property="uv_layers", icon='GROUP_UVS')
-                elif active_layer.coord_type == 'DECAL':
+                elif effective_coord_type == 'DECAL':
                     col.use_property_split = False
                     empty_col = col.column(align=True)
                     empty_col.prop(active_layer, "empty_object", text="")
@@ -397,7 +403,7 @@ def draw_layer_settings(layout, context):
                         decal_clip_col = split.column(align=True)
                         decal_clip_col.enabled = active_layer.use_decal_depth_clip
                         decal_clip_col.prop(decal_clip.inputs[2], "default_value", text="Depth")
-                elif active_layer.coord_type == 'PROJECT':
+                elif effective_coord_type == 'PROJECT':
                     proj_col = col.column(align=True)
                     proj_col.scale_y = 2
                     proj_col.operator("paint_system.projection_view_reset", text="View Current Projection", icon='CAMERA_DATA')
@@ -411,7 +417,7 @@ def draw_layer_settings(layout, context):
                         header.prop(proj_node.inputs["Enable"], "default_value", text="Normal Falloff")
                         if panel:
                             panel.prop(proj_node.inputs["Falloff"], "default_value", text="Degree")
-                elif active_layer.coord_type == 'PARALLAX':
+                elif effective_coord_type == 'PARALLAX':
                     col.prop(active_layer, "parallax_space", text="Space", expand=True)
                     if active_layer.parallax_space == 'UV':
                         col.prop_search(active_layer, "parallax_uv_map_name", text="UV Map",
@@ -429,21 +435,22 @@ def draw_layer_settings(layout, context):
                     col = panel.column()
                     col.template_node_inputs(mapping_node)
         elif ps_ctx.ps_settings.use_panel_quick_access:
-            if active_layer.coord_type == 'UV':
+            effective_coord_type = 'UV' if active_layer.coord_type == 'AUTO' else active_layer.coord_type
+            if effective_coord_type == 'UV':
                 row = layout.row(align=True)
                 row.label(icon="BLANK1")
                 row.prop_search(active_layer, "uv_map_name", text="UV Map",
                                     search_data=ps_ctx.ps_object.data, search_property="uv_layers", icon='GROUP_UVS')
-            elif active_layer.coord_type == 'DECAL':
+            elif effective_coord_type == 'DECAL':
                 row = layout.row(align=True)
                 row.label(icon="BLANK1")
                 row.operator("paint_system.select_empty", text="Select Empty", icon='OBJECT_ORIGIN')
-            elif active_layer.coord_type == 'PROJECT':
+            elif effective_coord_type == 'PROJECT':
                 row = layout.row(align=True)
                 row.label(icon="BLANK1")
                 row.operator("paint_system.projection_view_reset", text="View Current Projection", icon='CAMERA_DATA')
                 row.operator("paint_system.set_projection_view", text="", icon='FILE_REFRESH')
-            elif active_layer.coord_type == 'PARALLAX':
+            elif effective_coord_type == 'PARALLAX':
                 split = layout.split(factor=0.35, align=True)
                 row = split.row(align=True)
                 row.label(icon="BLANK1")
-- 
2.52.0

